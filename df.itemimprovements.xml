<data-definition>
    <enum-type type-name='improvement_type'>
        <enum-item name="ART_IMAGE"/>
        <enum-item name="COVERED"/>
        <enum-item name="RINGS_HANGING"/>
        <enum-item name="BANDS"/>
        <enum-item name="SPIKES"/>
        <enum-item name="ITEMSPECIFIC"/>
        <enum-item name="THREAD"/>
        <enum-item name="CLOTH"/>
        <enum-item name="SEWN_IMAGE"/>
    </enum-type>

    <struct-type type-name='dye_info'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='unit_id' ref-target='unit'/>
        <int16_t name='quality'/>
        <int16_t/>
        <int32_t/>
    </struct-type>

    <class-type type-name='itemimprovement' original-name='itemimprovementst'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t/>
        <int16_t name='quality'/>
        <int32_t/>
        <int32_t/>
        <virtual-methods>
            <vmethod/>
            <vmethod/>
            <vmethod name='clone'>
                <ret-type><pointer type-name='itemimprovement'/></ret-type>
            </vmethod>
            <vmethod name='write_file'> <pointer comment='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer comment='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod ret-type='improvement_type' name='getType'/>
            <vmethod/>
            <vmethod is-destructor='true'/>
            <vmethod ret-type='int32_t' name='getDyeValue'>
                <pointer/>
            </vmethod>
        </virtual-methods>
    </class-type>

    <class-type type-name='itemimprovement_art_imagest' inherits-from='itemimprovement'>
        <compound name='image'>
            <int32_t name='id'/>
            <int16_t name='subid'/>
        </compound>
    </class-type>

    <class-type type-name='itemimprovement_coveredst' inherits-from='itemimprovement'>
        <int32_t name='is_glazed'/>
    </class-type>

    <class-type type-name='itemimprovement_rings_hangingst' inherits-from='itemimprovement'/>
    <class-type type-name='itemimprovement_bandsst' inherits-from='itemimprovement'/>
    <class-type type-name='itemimprovement_spikesst' inherits-from='itemimprovement'/>

    <class-type type-name='itemimprovement_itemspecificst' inherits-from='itemimprovement'>
        <int32_t name='type'/>
    </class-type>

    <class-type type-name='itemimprovement_threadst' inherits-from='itemimprovement'>
        <compound name='dye' type-name='dye_info'/>
    </class-type>

    <class-type type-name='itemimprovement_clothst' inherits-from='itemimprovement'/>

    <class-type type-name='itemimprovement_sewn_imagest' inherits-from='itemimprovement'>
        <compound name='image'>
            <int32_t name='id'/>
            <int16_t name='subid'/>
        </compound>
        <compound name='cloth'>
            <int32_t name='unit_id' ref-target='unit'/>
            <int16_t name='quality'/>
            <int16_t/>
        </compound>
        <compound name='dye' type-name='dye_info'/>
    </class-type>

    <enum-type type-name='art_image_element_type'>
        <enum-item name="CREATURE"/>
        <enum-item name="PLANT"/>
        <enum-item name="TREE"/>
        <enum-item name="SHAPE"/>
        <enum-item name="ITEM"/>
    </enum-type>

    <class-type type-name='art_image_element'  original-name='art_image_elementst'>
        <int32_t name='count'/>
        <virtual-methods>
            <vmethod name='write_file'> <pointer comment='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer comment='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod ret-type='art_image_element_type' name='getType'/>
            <vmethod name='setID'> <int32_t name='ID' comment='race, item type, plant ID, or shape ID'/> </vmethod>
            <vmethod is-destructor='true'/>
            <vmethod name='clone'>
                <ret-type><pointer type-name='art_image_element'/></ret-type>
            </vmethod>
            <vmethod name='getSymbol'>
                <pointer type-name='int8_t' name='sym'/>
                <pointer type-name='int32_t'/>
            </vmethod>
            <vmethod name='getName1'>
                <pointer type-name='stl-string'/>
                <pointer/>
                <pointer/>
            </vmethod>
            <vmethod name='getName2'>
                <pointer type-name='stl-string'/>
                <pointer/>
            </vmethod>
            <vmethod/>
            <vmethod>
                <pointer/>
                <pointer/>
            </vmethod>
        </virtual-methods>
    </class-type>

    <class-type type-name='art_image_element_creaturest' inherits-from='art_image_element'>
        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='art_image_element_plantst' inherits-from='art_image_element'>
        <int32_t name='plant_id' ref-target='plant_raw'/>
    </class-type>

    <class-type type-name='art_image_element_treest' inherits-from='art_image_element'>
        <int32_t name='plant_id' ref-target='plant_raw'/>
    </class-type>

    <class-type type-name='art_image_element_shapest' inherits-from='art_image_element'>
        <int32_t name='shape_id' ref-target='descriptor_shape'/>
        <int16_t/>
    </class-type>

    <class-type type-name='art_image_element_itemst' inherits-from='art_image_element'>
        <int16_t name='item_type'/>
        <int16_t name='item_subtype'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index'/>
        <uint32_t name='flags' comment='assumed'/>
        <int32_t name='artifact_id' comment='world.artifacts.all'/>
    </class-type>

    <enum-type type-name='art_image_property_type'>
        <enum-item name="transitive_verb"/>
        <enum-item name="intransitive_verb"/>
    </enum-type>

    <class-type type-name='art_image_property'  original-name='art_image_propertyst'>
        <df-flagarray name='flags'/>
        <virtual-methods>
            <vmethod name='write_file'> <pointer comment='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer comment='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod ret-type='art_image_property_type' name='getType'/>
            <vmethod is-destructor='true'/>
            <vmethod name='clone'>
                <ret-type><pointer type-name='art_image_element'/></ret-type>
            </vmethod>
            <vmethod name='getName'>
                <pointer type-name='stl-string'/>
                <pointer/>
                <pointer/>
            </vmethod>
        </virtual-methods>
    </class-type>

    <class-type type-name='art_image_property_transitive_verbst' inherits-from='art_image_property'>
        <int32_t comment='always 0 or 1'/>
        <int32_t comment='always 0 or 1'/>
        <int16_t name='verb'/>
    </class-type>

    <class-type type-name='art_image_property_intransitive_verbst' inherits-from='art_image_property'>
        <int32_t comment='always 0 or 1'/>
        <int16_t name='verb'/>
    </class-type>

    <enum-type type-name='art_facet_type'>
        <enum-item name="OWN_RACE"/>
        <enum-item name="FANCIFUL"/>
        <enum-item name="GOOD"/>
        <enum-item name="EVIL"/>
    </enum-type>

    <bitfield-type type-name='engraving_flags' base-type='uint32_t'>
        <flag-bit name='floor'/>
        <flag-bit name='west'/>
        <flag-bit name='east'/>
        <flag-bit name='north'/>
        <flag-bit name='south'/>
        <flag-bit name='hidden'/>
        <flag-bit name='northwest'/>
        <flag-bit name='northeast'/>
        <flag-bit name='southwest'/>
        <flag-bit name='southeast'/>
    </bitfield-type>

    <struct-type type-name='engraving' instance-vector='$global.world.engravings'>
        <int32_t name='artist' ref-target='historical_figure'/>
        <int32_t name='masterpiece_event' ref-target='history_event'/>
        <int32_t name='skill_rating' comment='at the moment of creation'/>
        <compound name='pos' type-name='coord'/>
        <compound name='flags' type-name='engraving_flags'/>
        <int8_t name='tile'/>
        <int32_t name='type'/>
        <int16_t name='subtype'/>
        <enum base-type='int16_t' name='quality' type-name='item_quality'/>
    </struct-type>

    <struct-type type-name='art_image'>
        <stl-vector name='elements'>
            <pointer type-name='art_image_element'/>
        </stl-vector>
        <stl-vector name='properties'>
            <pointer type-name='art_image_property'/>
        </stl-vector>
        <int32_t comment='probably a histfig ID'/>
        <compound>
            <stl-string/>
            <stl-string/>
            <static-array type-name='int32_t' count='7'/>
            <static-array type-name='int16_t' count='7'/>
            <int32_t/>
            <int16_t/>
            <int8_t/>
        </compound>
        <int32_t/>
        <int16_t/>
        <int32_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <pointer type-name='general_ref'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
    </struct-type>

    <struct-type type-name='art_image_collection' instance-vector='$global.world.art_images'>
        <int32_t name='id' comment='art_image_*.dat'/>
        <static-array name='images' count='500'>
            <pointer type-name='art_image'/>
        </static-array>
    </struct-type>

</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
