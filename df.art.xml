<data-definition>
    <enum-type type-name='art_image_element_type'>
        <enum-item name="CREATURE"/>
        <enum-item name="PLANT"/>
        <enum-item name="TREE"/>
        <enum-item name="SHAPE"/>
        <enum-item name="ITEM"/>
    </enum-type>

    <class-type type-name='art_image_element'  original-name='art_image_elementst'>
        <int32_t name='count'/>
        <virtual-methods>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod ret-type='art_image_element_type' name='getType'/>
            <vmethod name='setID'> <int32_t name='ID' comment='race, item type, plant ID, or shape ID'/> </vmethod>
            <vmethod is-destructor='true'/>

            <vmethod name='clone'>
                <ret-type><pointer type-name='art_image_element'/></ret-type>
            </vmethod>
            <vmethod name='getSymbol'>
                <pointer type-name='int8_t' name='sym'/>
                <pointer type-name='int32_t'/>
            </vmethod>
            <vmethod name='getName1'>
                <pointer type-name='stl-string' name='name'/>
                <bool name='useThe'/>
                <bool name='useName'/>
            </vmethod>
            <vmethod name='getName2'> seems to return like getName1 but with useName true
                <pointer type-name='stl-string' name='name'/>
                <pointer/>
            </vmethod>
            <vmethod/>

            <vmethod name='getColorAndShape'>
                <pointer name='colors'><stl-vector type-name='int16_t'/></pointer>
                <pointer name='shapes'><stl-vector type-name='int16_t'/></pointer>
            </vmethod>
        </virtual-methods>
    </class-type>

    <class-type type-name='art_image_element_creaturest' inherits-from='art_image_element'>
        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='art_image_element_plantst' inherits-from='art_image_element'>
        <int32_t name='plant_id' ref-target='plant_raw'/>
    </class-type>

    <class-type type-name='art_image_element_treest' inherits-from='art_image_element'>
        <int32_t name='plant_id' ref-target='plant_raw'/>
    </class-type>

    <class-type type-name='art_image_element_shapest' inherits-from='art_image_element'>
        <int32_t name='shape_id' ref-target='descriptor_shape'/>
        <int16_t/>
    </class-type>

    <class-type type-name='art_image_element_itemst' inherits-from='art_image_element'>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index'/>
        <bitfield name='flags' type-name='item_flags'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <enum-type type-name='art_image_property_type'>
        <enum-item name="transitive_verb"/>
        <enum-item name="intransitive_verb"/>
    </enum-type>

    <class-type type-name='art_image_property'  original-name='art_image_propertyst'>
        <df-flagarray name='flags'/>
        <virtual-methods>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod ret-type='art_image_property_type' name='getType'/>
            <vmethod is-destructor='true'/>
            <vmethod name='clone'>
                <ret-type><pointer type-name='art_image_element'/></ret-type>
            </vmethod>

            <vmethod name='getName'>
                <pointer type-name='stl-string'/>
                <pointer/>
                <pointer/>
            </vmethod>
        </virtual-methods>
    </class-type>

    <enum-type type-name='art_image_property_verb' base-type='int16_t'>
        <enum-item name='Withering'/>
        <enum-item name='SurroundedBy'/>
        <enum-item name='Massacring'/>
        <enum-item name='Fighting'/>
        <enum-item name='Laboring'/>
        <enum-item name='Greeting'/>
        <enum-item name='Refusing'/>
        <enum-item name='Speaking'/>
        <enum-item name='Embracing'/>
        <enum-item name='StrikingDown'/>
        <enum-item name='MenacingPose'/>
        <enum-item name='Traveling'/>
        <enum-item name='Raising'/>
        <enum-item name='Hiding'/>
        <enum-item name='LookingConfused'/>
        <enum-item name='LookingTerrified'/>
        <enum-item name='Devouring'/>
        <enum-item name='Admiring'/>
        <enum-item name='Burning'/>
        <enum-item name='Weeping'/>
        <enum-item name='LookingDejected'/>
        <enum-item name='Cringing'/>
        <enum-item name='Screaming'/>
        <enum-item name='SubmissiveGesture'/>
        <enum-item name='FetalPosition'/>
        <enum-item name='SmearedIntoSpiral'/>
        <enum-item name='Falling'/>
        <enum-item name='Dead'/>
        <enum-item name='Laughing'/>
        <enum-item name='LookingOffended'/>
        <enum-item name='BeingShot'/>
        <enum-item name='PlaintiveGesture'/>
        <enum-item name='Melting'/>
        <enum-item name='Shooting'/>
        <enum-item name='Torturing'/>
        <enum-item name='CommittingDepravedAct'/>
        <enum-item name='Praying'/>
        <enum-item name='Contemplating'/>
        <enum-item name='Cooking'/>
        <enum-item name='Engraving'/>
        <enum-item name='Prostrating'/>
        <enum-item name='Suffering'/>
        <enum-item name='BeingImpaled'/>
        <enum-item name='BeingContorted'/>
        <enum-item name='BeingFlayed'/>
        <enum-item name='HangingFrom'/>
        <enum-item name='BeingMutilated'/>
        <enum-item name='TriumphantPose'/>
    </enum-type>

    <class-type type-name='art_image_property_transitive_verbst' inherits-from='art_image_property'>
        <int32_t name='subject'/>
        <int32_t name='object'/>
        <enum base-type='int16_t' name="verb" type-name='art_image_property_verb'/>
    </class-type>

    <class-type type-name='art_image_property_intransitive_verbst' inherits-from='art_image_property'>
        <int32_t name='subject'/>
        <enum base-type='int16_t' name="verb" type-name='art_image_property_verb'/>
    </class-type>

    <enum-type type-name='art_facet_type'>
        <enum-item name="OWN_RACE"/>
        <enum-item name="FANCIFUL"/>
        <enum-item name="GOOD"/>
        <enum-item name="EVIL"/>
    </enum-type>

    <struct-type type-name='art_image'>
        <code-helper name='find-instance'>$(find-instance $art_image_chunk $$).images[$]</code-helper>
        <code-helper name='describe'>(describe-obj $.name)</code-helper>

        <stl-vector name='elements' pointer-type='art_image_element'/>
        <stl-vector name='properties' pointer-type='art_image_property'/>

        <int32_t name='event' ref-target='history_event'/>
        <compound name='name' type-name='language_name'/>
        <enum base-type='int32_t' name='spec_ref_type' type-name='specific_ref_type'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <enum base-type='int16_t' name='quality' type-name='item_quality'/>
        <int32_t name='artist' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <pointer type-name='general_ref'/>
        <int32_t name='year'/>
        <int32_t/>
        <int32_t name='id' ref-target='art_image_chunk'/>
        <int16_t name='subid' ref-target='art_image' aux-value='$$.id'/>
    </struct-type>

    <struct-type type-name='art_image_chunk'
                 instance-vector='$global.world.art_image_chunks' key-field='id'>
        <int32_t name='id' comment='art_image_*.dat'/>
        <static-array name='images' count='500'>
            <pointer type-name='art_image'/>
        </static-array>
    </struct-type>

    <struct-type type-name='art_image_ref'>
        <int32_t name='id' ref-target='art_image_chunk'/>
        <int16_t name='subid' ref-target='art_image' aux-value='$$.id'/>
        <int32_t name='civ_id' ref-target='historical_entity' since='v0.34.01'/>
        <int32_t name='site_id' ref-target='world_site' since='v0.34.01'/>
    </struct-type>

    <struct-type type-name='poetic_form' instance-vector='$global.world.poetic_forms.all' key-field='id'>
        <int32_t name='id'/>
        <compound name='name' type-name='language_name'/>
        <int32_t name='originating_entity' ref-target='historical_entity'/> "originating in ..."
        <int32_t name='original_author' ref-target='historical_figure'/> "originally devised by ..."
        <int32_t/>

        <int32_t name='usage'/>
        probably a bitfield
        1 - 'guides poets during improvised performances'
        2 - 'applied by poets to produce individual poems'

        <stl-vector name='parts' pointer-type='poetic_form_part'/>
        <int32_t name='each_line_feet'/>
        
        <int32_t name='each_line_tone_pattern'/>
        0 - even-even
        1 - even-uneven
        2 - uneven-even
        3 - uneven-uneven
        4 - even-even-even
        5 - uneven-even-even
        6 - e-u-e
        7 - e-e-u
        8 - e-u-u
        9 - u-u-e
        10 - u-e-u
        11 - u-u-u

        <int32_t name='every_line_caesura'/>
        0 - initial
        1 - medial
        2 - terminal
        
        <stl-vector name='common_features' type-name='int32_t'/> "certain lines often ... and they sometimes ..."
        0 - share an underlying meaning
        1 - contrast an underlying meaning
        2 - required to maintain phrasing
        3 - have similar grammatical structure
        4 - use the same placement of allusions
        5 - have reversed word order
        6 - reverse grammatical structures

        '... is a XX poetic form ...'
        <int32_t name='mood'/>
        0 - narrative
        1 - dramatic
        2 - reflective
        3 - riddle
        4 - ribald
        5 - light
        6 - solemn

        <int32_t name='subject'/>
        -1 - a chosen subject
        0 - the past
        1 - current events
        2 - the future
        3 - someone recently deceased
        4 - someone recently retired
        5 - religion
        6 - a specific place
        7 - a specific wilderness region
        8 - nature
        9 - a lover
        10 - family
        11 - alcoholic beverages
        12 - a journey
        13 - war
        14 - the hunt
        15 - mining
        16 - death
        17 - immortality
        18 - someone's character
        19 - a historical figure or specific figure
        20 - an abstract concept or specific concept

        <compound is-union='true'>
            <int32_t name='subject_target'/> histfig id for 19
            <enum name='subject_topic' base-type='int32_t' type-name='sphere_type'/> concept for 20
        </compound>

        <int32_t name='action'/>
        0 - describe
        1 - satirize
        2 - amuse the audience
        3 - complain
        4 - renounce
        5 - make an apology
        6 - express pleasure
        7 - express grief
        8 - praise
        9 - teach a moral lesson
        10 - make an assertion
        11 - make a counter-assertion
        13 - synthesize previous ideas
        15 - invert the assertion 


        <int32_t/>
        
        <int32_t name='features'/> bitfield. same as line_features1 below. "use of ... is characteristic of the form"
        1 - internal rhyme
        2 - end rhymes don't generally match perfectly
        4 - alliteration
        8 - onomatopoeia
        16 - antanaclasis
        32 - must feature lines with different readings depending on word breaks
        64 - must feature lines which can be read backwards as well as forwards
        128 - must feature lines which can be read orthogonally across the standard lines
        256 - must feature lines which emerge when reading along certain prescribed paths across the body of the poem
        512 - assonance
        1024 - consonance
        2048 - elision
        4096 - epenthesis
        8192 - synchysis
        32768 - allegory
        262144 - metaphor
        simile
        metonymy
        vivid imagery
        juxtaposision


        <stl-vector pointer-type='poetic_form_sub2'/>
    </struct-type>

    <struct-type type-name='poetic_form_part'>
        <int32_t name='size_type'/> bitfield.
        1 - line count
        2 - "brief/full verse paragraphs", depending on size

        <int32_t name='count_min'/>
        <int32_t name='count_max'/>
        <int32_t name='size'/> line, couplet, tercet, quatrain, quintain, etc. OR "brief verse" if less than 6, otherwise "full verse"
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector name='line_endings' type-name='int32_t'/>
        <stl-vector name='line_feet' type-name='int32_t'/> "the Nth line has XX feet"
        <stl-vector name='line_tone_patterns' type-name='int32_t'/>
        
        <stl-vector name='line_caesuras' type-name='int32_t'/>
        0 - initial
        1 - medial
        2 - terminal

        <stl-vector name='line_features' type-name='int32_t'/> bitfields
        1 - must make use of internal rhyme
        2 - the rhyme at the end of Nth line does not need to match perfectly
        4 - must make use of alliteration
        8 - must make use of onomatopoeia
        16 - must make use of antanaclasis
        32768 - must make use of allegory
        65536 - must make use of ambiguity
        131072 - must make use of symbolism

        "The XX line ZZ of the subject on YY line"
        <stl-vector name='additional_features' type-name='int32_t'/> ZZ
        0 - shares the underlying meaning
        1 - contrasts the underlying meaning
        2 - is required to maintain the phrasing
        3 - has the same grammatical structure
        4 - uses the same placement of allusions
        5 - reverses the word order
        6 - reverses the grammatical structure
        7 - presents a different view
        8 - must expand the idea
        <stl-vector name='additional_targets' type-name='int32_t'/> YY
        <stl-vector name='additional_lines' type-name='int32_t'/> XX

        <stl-vector type-name='int32_t'/>
        <stl-vector name='line_subjects' type-name='int32_t'/> same as form subject above
        <stl-vector name='line_subject_targets' type-name='int32_t'/>
        <stl-vector name='line_actions' type-name='int32_t'/> same as the form action above
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        
        <stl-vector name='certain_lines_features' type-name='int32_t'/> "certain lines have ..." same as additional_features above

        <int32_t name='mood'/> same as the form mood above
        <int32_t/>
        <int32_t/>
        <int32_t name='action'/> same as the form action above
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='poetic_form_sub2'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='musical_form' instance-vector='$global.world.musical_forms.all' key-field='id'>
        <int32_t name='id'/>
        <compound name='name' type-name='language_name'/>
        <int32_t/>
        <int32_t/>
        <stl-vector pointer-type='musical_form_sub1'/>
        <stl-vector pointer-type='musical_form_instruments'/>
        <stl-vector pointer-type='musical_form_sub3'/>
        <stl-vector pointer-type='musical_form_sub4'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='musical_form_sub1'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector pointer-type='musical_form_sub3'/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='musical_form_instruments'>
        <int32_t name='instrument_subtype' ref-target='itemdef_instrumentst'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='musical_form_sub3'>
        <int32_t/>
        <int32_t/>
        <stl-vector pointer-type='musical_form_sub5'/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='musical_form_sub4'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='musical_form_sub5'>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='dance_form' instance-vector='$global.world.dance_forms.all' key-field='id'>
        <int32_t name='id'/>
        <compound name='name' type-name='language_name'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector pointer-type='dance_form_sub1'/>
        <stl-vector pointer-type='dance_form_sub2'/>
    </struct-type>

    <struct-type type-name='dance_form_sub1'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='dance_form_sub2'>
        <stl-string/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='scale' instance-vector='$global.world.scales.all' key-field='id'>
        <int32_t name='id'/>
        <int32_t name='flags'/>
        <int32_t/>
        <static-array type-name='int32_t' count='25'/>
        <int32_t/>
        <stl-vector pointer-type='scale_sub1'/>
        <stl-vector pointer-type='scale_sub2'/>
        <compound name='unk1'>
            <int32_t/>
            <static-array type-name='stl-string' count='25'/>
            <static-array type-name='stl-string' count='25'/>
            <static-array type-name='int32_t' count='25'/>
            <int32_t/>
        </compound>
    </struct-type>

    <struct-type type-name='scale_sub1'>
        <stl-string/>
        <static-array type-name='int32_t' count='5'/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='scale_sub2'>
        <int32_t/>
        <stl-string/>
        <static-array type-name='int32_t' count='7'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='rhythm' instance-vector='$global.world.rhythms.all' key-field='id'>
        <int32_t name='id'/>
        <stl-vector pointer-type='rhythm_sub1'/>
        <stl-vector pointer-type='rhythm_sub2'/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='rhythm_sub1'>
        <stl-string/>
        <stl-vector>
            <pointer>
                <pointer type-name='int32_t' is-array='true'/>
                <int32_t name='length'/>
            </pointer>
        </stl-vector>
        <pointer type-name='stl-string'/>
        <pointer type-name='stl-string'/>
        <int32_t/>
    </struct-type>

    <struct-type type-name='rhythm_sub2'>
        <stl-string/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
    </struct-type>

    <enum-type type-name='occupation_type' base-type='int32_t'>
        <enum-item name='TAVERN_KEEPER'/>
        <enum-item name='PERFORMER'/>
        <enum-item name='SCHOLAR'/>
        <enum-item name='MERCENARY'/>
        <enum-item name='MONSTER_SLAYER'/>
        <enum-item name='SCRIBE'/>
        <enum-item name='MESSENGER'/>
    </enum-type>

    <struct-type type-name='occupation' instance-vector='$global.world.occupations.all' key-field='id'>
        <int32_t name='id'/>
        <enum name='type' base-type='int32_t' type-name='occupation_type'/>
        <int32_t name='histfig_id' ref-target='historical_figure'/>
        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='location_id' ref-target='abstract_building' aux-value='$$.site_id'/>
        <int32_t name='site_id' ref-target='world_site'/>
        <int32_t name='group_id' ref-target='historical_entity'/>
        <stl-vector pointer-type='occupation_sub1'/>
        <int32_t/>
        <pointer/>
        <pointer/>
    </struct-type>

    <struct-type type-name='occupation_sub1'>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>

</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
