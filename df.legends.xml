<data-definition>
  <struct-type type-name='historical_entity' key-field='id'>
    <int16_t name='unk1'/>
    <int32_t name='id' comment='index in the array'/>
    <pointer name='entity_raw'/>

    <int32_t name='save_file_id' comment='changes once has 100 entries'/>
    <int16_t name='next_member_idx'/>

    <compound name='name' type-name='language_name'/>

    <code-helper name='describe'>
      (describe-obj $.name)
      (describe-obj $global.world.raws.creatures[$.race])
    </code-helper>

    <int16_t name='race' refers-to='$global.world.raws.creatures[$]'/>
    <int32_t name='unk5'/>

    <static-array name='unk6' count='2'>
      <stl-vector>
        <pointer>
          <int16_t name='unk1'/>
          <int32_t name='unk2'/>
          <int16_t name='unk3'/>
        </pointer>
      </stl-vector>
    </static-array>

    <stl-vector name='unit_ids'>
      <int32_t refers-to='(find-unit $)'/>
    </stl-vector>

    <stl-vector name='unk7' type-name='int32_t'/>

    <stl-vector name='hist_figure_ids'>
      <int32_t refers-to='(find-by-id $global.world.history.figures $id $)'/>
    </stl-vector>

    <compound name='unknown1'>
      <static-array name='unk8' count='15'>
        <stl-vector type-name='int16_t'/>
      </static-array>

      <static-array name='unk9' count='12'>
        <stl-vector name='unk1' type-name='int16_t'/>
        <stl-vector name='unk2' type-name='int32_t'/>
      </static-array>

      <static-array name='unk10' count='3'>
        <stl-vector type-name='int32_t'/>
      </static-array>

      <static-array name='unk11' count='21'>
        <stl-vector name='unk1' type-name='int16_t'/>
        <stl-vector name='unk2' type-name='int32_t'/>
      </static-array>

      <static-array name='unk12' count='26'>
        <stl-vector comment='blah'/>
      </static-array>

      <static-array name='unk13' count='12' type-name='int16_t'/>
      <stl-vector name='unk14'/>
      <static-array name='unk15' count='24' type-name='int16_t'/>

      <stl-vector name='unk16' type-name='int16_t'/>
      <stl-vector name='unk17' type-name='int32_t'/>
      <stl-vector name='unk18' type-name='int16_t'/>
      <stl-vector name='unk19' type-name='int8_t'/>
      <stl-vector name='unk20' type-name='int8_t'/>
      <stl-vector name='unk21' type-name='int8_t'/>
      <stl-vector name='unk22' type-name='int8_t'/>
      <stl-vector name='unk23' type-name='int16_t'/>
      <stl-vector name='unk24' type-name='int16_t'/>
      <stl-vector name='unk25' type-name='pointer'/>
    </compound>

    etc etc

    <stl-vector name='hist_figures' offset='0x804'>
      <pointer type-name='historical_figure'/>
    </stl-vector>
    <stl-vector name='nemesis'>
      <pointer type-name='nemesis_record'/>
    </stl-vector>

    etc etc
 </struct-type>

  <struct-type type-name='historical_figure' key-field='id'>
    <int16_t name='profession'/>
    <int16_t name='race' refers-to='$global.world.raws.creatures[$]'/>
    <int16_t name='caste' refers-to='$global.world.raws.creatures[$$._parent.race].caste[$]'/>
    <int8_t name='sex'/>

    <int32_t name='appeared_year'/>
    <int32_t name='born_year'/>
    <int32_t name='born_seconds'/>
    <int32_t name='unk1'/>
    <int32_t name='unk2'/>
    <int32_t name='died_year'/>
    <int32_t name='died_seconds'/>

    <compound type-name='language_name' name='name'/>

    <code-helper name='describe'>
      (describe-obj $.name)
      (awhen $global.world.raws.creatures[$.race]
        (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
    </code-helper>

    <int32_t name='civ_id' refers-to='(find-entity $)'/>
    <int32_t name='population_id' refers-to='(find-by-id $global.world.entity_populations $id $)'/>

    <pointer name='flags' type-name='flag-bit'/>
    <int32_t name='flags_cnt'/>

    <int32_t name='unit_id' refers-to='(find-unit $)'/>
    <int32_t name='id'/>

    <int32_t name='unk4'/>

    <stl-vector name='entity_links'/>
    <stl-vector name='site_links'/>
    <stl-vector name='histfig_links'/>

    <pointer name='unk6'/>

    <static-array name='unk7' count='5' type-name='int32_t' comment='empty'/>
  </struct-type>

  <struct-type type-name='nemesis_record' key-field='id'>
    <int32_t name='id' comment='sequential index in the array'/>
    <int32_t name='unit_id' refers-to='(find-unit $)'/>

    <int32_t name='save_file_id' comment='unit-*.dat'/>
    <int16_t name='member_idx' comment='index in the file'/>

    <pointer name='figure' type-name='historical_figure'/>
    <pointer name='unit' type-name='unit'/>

    <code-helper name='describe'>
      (describe-obj $.figure)
    </code-helper>

    <int32_t name='unk6' comment='-1'/>
    <int32_t name='unk7' comment='0'/>
    <int32_t name='unk8' comment='0'/>
    <int32_t name='unk9' comment='0'/>
    <int16_t name='unk10' comment='-1'/>
    <int32_t name='unk11' comment='-1'/>
    <int32_t name='unk12' comment='-1'/>
    <pointer name='flags' type-name='flag-bit'/>
    <int32_t name='flags_cnt'/>
    <int32_t name='unk13' comment='0'/>
    <int32_t name='unk14' comment='0'/>
    <int32_t name='unk15' comment='0'/>
  </struct-type>

  <struct-type type-name='artifact_record' key-field='id'>
    <int32_t name='id'/>

    <code-helper name='describe'>
      (describe-obj $.name)
    </code-helper>

    <compound name='name' type-name='language_name'/>
    <pointer name='unk1'/>
    <int32_t name='unk2'/>
    <pointer name='item' type-name='item'/>
  </struct-type>

  <struct-type type-name='world_history'>
    dtor 8532fa0

    <static-array name='figure_events' count='2'>
      <stl-vector>
        <pointer/>
      </stl-vector>
    </static-array>

    <stl-vector name='figures'>
      <pointer type-name='historical_figure'/>
    </stl-vector>

    <static-array name='other_events' count='9'>
      <stl-vector>
        <pointer/>
      </stl-vector>
    </static-array>

    <stl-vector name='ages'>
      <pointer/>
    </stl-vector>

    <stl-vector name='unk1' type-name='int32_t'/>
    <stl-vector name='unk2' type-name='int16_t'/>

    <int32_t/>
    <int32_t/>
    <int32_t/>
    <int32_t/>
    <stl-vector/>
    <stl-vector/>
    <stl-vector/>
    <stl-vector/>
    <stl-vector/>
    <stl-vector/>
    <bool/>
    <stl-vector/>
    <int32_t/>
    <int32_t/>
    <int32_t/>
  </struct-type>
</data-definition>
