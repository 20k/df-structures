<data-definition>
    <struct-type type-name='world_site' key-field='id'
                 instance-vector='$global.world.world_data.sites'>
        <compound name='name' type-name='language_name'/>

        <code-helper name='describe'>(describe-obj $.name)</code-helper>

        <int32_t name="civ_id" ref-target='historical_entity'/>
        <int32_t name="owner1" ref-target='historical_entity'/>
        <int32_t name="owner2" ref-target='historical_entity'/>
        <int32_t comment='v0.34.01'/>

        <enum base-type='int16_t' name="type">
            <enum-item name='PlayerFortress'/>
            <enum-item name='DarkFortress'/>
            <enum-item name='Cave'/>
            <enum-item name='MountainHalls'/>
            <enum-item name='ForestRetreat'/>
            <enum-item name='Town'/>
            <enum-item name='Unk6'/>
            <enum-item name='LairShrine'/>
            <enum-item name='Fortress'/>
            <enum-item name='Camp'/>
            <enum-item name='Monument'/>
        </enum>

        <compound name='pos' type-name='coord2d'/>

        <int32_t name="id"/>

        <stl-vector name="nemesis" comment='could also be units - they happen to coincide here'>
            <int32_t ref-target='nemesis_record'/>
        </stl-vector>

        <stl-vector name="unk_94"/>

        <stl-vector name="animals">
            <pointer type-name='world_population'/>
        </stl-vector>

        <stl-vector name="inhabitants">
            <pointer>
                <int32_t name="count"/>
                <int32_t name="race" ref-target='creature_raw'/>
                <int32_t name="unk_8"/>
                <int32_t name="unk_c" ref-target='historical_entity'/>
                <int32_t name="unk_10"/>
            </pointer>
        </stl-vector>

        <stl-vector name="unk_c4"/>
        <stl-vector name="unk_d4"/>

        <int32_t name="index"/>

        <int16_t name="unk_e8"/>
        <int16_t name="unk_ea"/>
        <int16_t name="unk_ec"/>
        <int16_t name="unk_ee"/>

        <int32_t name="unk_f0"/>
        <int32_t name="unk_f4"/>
        <int32_t name="unk_f8"/>
        <int32_t name="unk_fc"/>
        <int32_t name="unk_100"/>

        <uint32_t name="unk_104"/>
        <uint32_t name="unk_108"/>

        <int32_t name="unk_10c"/>
        <int32_t name="unk_110"/>
        <int32_t name="unk_114"/>
        <int32_t name="unk_118"/>
        <int32_t name="unk_11c"/>
        <int32_t name="unk_120"/>
        <int32_t name="unk_124"/>
        <int32_t name="unk_128"/>
        <int32_t name="unk_12c"/>
        <int32_t name="unk_130"/>
        <int32_t name="unk_134"/>
        <int32_t name="unk_138"/>

        <int32_t comment='v0.34.01'/>

        <stl-vector name="unk_13c">
            <pointer>
                <int32_t name="unk_0"/>
                <int32_t name="unk_4"/>
                <int32_t name="unk_8"/>
                <int32_t name="unk_c"/>
            </pointer>
        </stl-vector>

        <df-flagarray name='flags'/>

        <stl-vector name="buildings">
            <pointer comment='abstract_building'/>
        </stl-vector>

        <int32_t name="next_building_id"/>
        <int32_t name="unk_168"/>
        <int32_t name="unk_16c"/>
        <int32_t name="unk_170"/>
        <int32_t name="unk_174"/>

        <compound name='unk_178' type-name='coord'/>

        <pointer name="realization" type-name='world_site_realization'/>

        <pointer name="unk_184">
            <int32_t name="unk_0"/>
            <int16_t name="unk_4"/>
            <stl-vector name="unk_8"/>
            <int32_t name="unk_14"/>
            <int32_t name="unk_18"/>
            <int32_t name="unk_1c"/>
        </pointer>

        <stl-vector type-name='pointer' comment='v0.34.01'/>
        <stl-vector type-name='int32_t' comment='v0.34.01'/>

        <pointer name="unk_188" type-name='world_site_unk130'/>

        <stl-vector name="unk_18c"/>
        <stl-vector name="unk_19c"/>
    </struct-type>

    <struct-type type-name='world_site_realization'>
        <stl-vector name='obj1' pointer-type='site_realization_obj1'/>
        <int32_t name="unk_10"/>
        <int32_t name="unk_14"/>
        <int32_t name="unk_18"/>
        <static-array name='unk_1c' count='17'>
            <static-array count='17' type-name='int8_t'/>
        </static-array>
        <static-array name='unk_13d' count='17'>
            <static-array count='17' type-name='int8_t'/>
        </static-array>
        <static-array name='unk_25e' count='17'>
            <static-array count='17' type-name='int16_t'/>
        </static-array>
        2601 = 51*51 = 17*3*17*3
        <static-array name='unk_4a0' count='51'>
            <static-array count='51' pointer-type='site_realization_obj2'/>
        </static-array>
        <static-array name='unk_2d44' count='2601' type-name='pointer'/>
        <static-array name='unk_55e8' count='17'>
            <static-array count='17'>
                <int32_t name="unk_55e8"/>
                <int32_t name="unk_55ec"/>
                <int32_t name="unk_55f0"/>
                <int32_t name="unk_55f4"/>
                <int32_t name="unk_55f8"/>
                <int32_t name="unk_55fc"/>
                <int32_t name="unk_5600"/>
                <int32_t name="unk_5604"/>
                <int32_t name="unk_5608"/>
                <int32_t name="unk_560c"/>
                <int32_t name="unk_5610"/>
                <int32_t name="unk_5614"/>
                <stl-vector name="unk_5618"/>
                <int32_t name="unk_5628"/>
                <int32_t name="unk_562c"/>
                <int32_t name="unk_5630"/>
                <int32_t name="unk_5634"/>
            </static-array>
        </static-array>
        <static-array name='unk_b838' count='17'>
            <static-array count='17'>
                <uint8_t name='unk1a'/>
                <uint8_t name='unk1b'/>
                <uint8_t name='unk2a'/>
                <uint8_t name='unk2b'/>
                <stl-vector name='obj1' pointer-type='site_realization_obj1'/>
                <int32_t name='unk4'/>
                <uint32_t name='unk5'/>
                <stl-vector name='unk6'/>
            </static-array>
        </static-array>
        <static-array name='unk_e1e4' count='2601' type-name='uint8_t'/>
        <static-array name='unk_ec0e' count='2601' type-name='int16_t'/>
        <static-array name='unk_10060' count='2601' type-name='int8_t'/>
        2704 = 52*52
        <static-array name='unk_10a8c' count='2704' type-name='int32_t'/>
        <stl-vector name='unk_134cc'>
            <pointer>
                <int32_t name="unk_0"/>
                <int32_t name="index"/>
                <int32_t name="unk_8"/>
                <int32_t name="unk_c"/>
                <int32_t name="unk_10"/>
                <int32_t name="unk_14"/>
                <int32_t name="unk_18"/>
            </pointer>
        </stl-vector>
    </struct-type>

    <struct-type type-name='site_realization_obj2'>
        <static-array name='unk1' count='48' type-name='int32_t'/>
        <static-array name='unk2' count='48' type-name='int32_t'/>
        <static-array name='unk3' count='48' type-name='int32_t'/>
        <static-array name='unk4' count='48' type-name='int32_t'/>
        <int32_t name="idx_x"/>
        <int32_t name="idx_y"/>
        <int32_t name="unk_308"/>
        <int32_t name="unk_30c"/>
        <int32_t name="unk_310"/>
        <int32_t name="unk_314"/>
        <int32_t name="unk_318"/>
        <int32_t name="unk_31c"/>
        <int32_t name="unk_320"/>
        <int32_t name="unk_324"/>
        <int32_t name="unk_328"/>
        <int32_t name="unk_32c"/>
        <int32_t name="unk_330"/>
        <int32_t name="unk_334"/>
        <pointer name="up" type-name="site_realization_obj2"/>
        <pointer name="down" type-name="site_realization_obj2"/>
        <pointer name="right" type-name="site_realization_obj2"/>
        <pointer name="left" type-name="site_realization_obj2"/>
        <int8_t name="unk_348"/>
        <int8_t name="unk_349"/>
        <int32_t name='unk_34c'/>
        <int8_t/>
        <int8_t/>
        <int8_t/>
        <int8_t/>
        <int16_t/>
        <static-array name='unk_356' count='32' type-name='coord'/>
    </struct-type>

    <struct-type type-name='site_realization_obj1'>
        <int32_t name="index"/>
        <int32_t name="unk_4"/>
        <int32_t name="unk_8"/>
        <int32_t name="unk_c"/>
        <int32_t name="unk_10"/>
        <int32_t name="unk_14"/>
        <int32_t name="unk_18"/>
        <stl-vector name="unk_1c">
            <pointer>
                <int32_t name="unk_0"/>
                <int32_t name="unk_4"/>
                <int32_t name="unk_8"/>
                <int32_t name="unk_c"/>
                <int32_t name="unk_10"/>
                <int32_t name="unk_14"/>
            </pointer>
        </stl-vector>
        <int32_t name="unk_2c"/>
        <int32_t name="unk_30"/>
        <int32_t name="unk_34"/>
        <int16_t name="unk_38"/>
        <padding name="unk_3a" size="2"/>
        <int32_t name="unk_3c"/>
        <int32_t name="unk_40"/>
        <int32_t name="unk_44"/>
        <pointer name="building_info" type-name='site_realization_building_infost'/>
        <stl-vector name="unk_4c">
            <pointer>
                <int32_t name="unk_0"/>
                <int32_t name="unk_4"/>
                <int32_t name="unk_8"/>
                <int32_t name="unk_c"/>
                <int32_t name="unk_10"/>
                <int32_t name="unk_14"/>
            </pointer>
        </stl-vector>
        <int32_t name="unk_5c"/>
        <stl-vector name="unk_60"/>
    </struct-type>

    <class-type type-name='site_realization_building_infost'>
    </class-type>

    <struct-type type-name='site_building_item'>
        <int32_t name="unk"/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </struct-type>

    <class-type type-name='site_realization_building_info_castle_towerst'
                inherits-from='site_realization_building_infost'>
        <int32_t name='unk_4'/>
        <int32_t name="unk_8"/>
        <int32_t name="unk_c"/>
        <int32_t name="unk_10"/>
        <int32_t name="unk_14"/>
        <int32_t name="unk_18"/>
        <compound name='item1' type-name='site_building_item'/>
        <compound name='item2' type-name='site_building_item'/>
        <int32_t name="unk_3c"/>
    </class-type>

    <class-type type-name='site_realization_building_info_castle_wallst'
                inherits-from='site_realization_building_infost'>
        <int32_t name="unk_4"/>
        <int32_t name="unk_8"/>
        <int32_t name="unk_c"/>
        <int32_t name="unk_10"/>
        <int32_t name="unk_14"/>
        <int32_t name="unk_18"/>
        <int32_t name="unk_1c"/>
        <compound name='item1' type-name='site_building_item'/>
        <compound name='item2' type-name='site_building_item'/>
    </class-type>

    <class-type type-name='site_realization_building_info_shop_housest'
                inherits-from='site_realization_building_infost'>
        <int32_t name="unk_4"/>
        <stl-string name="unk_8"/>
        <stl-string name="unk_24"/>
        <int32_t name="unk_40"/>
        <int32_t name="unk_44"/>
        <int32_t name="unk_48"/>
        <int32_t name="unk_4c"/>
        <int32_t name="unk_50"/>
        <int32_t name="unk_54"/>
        <int32_t name="unk_58"/>
        <int32_t name="unk_5c"/>
        <int16_t name="unk_60"/>
        <int16_t name="unk_62"/>
        <int16_t name="unk_64"/>
        <int16_t name="unk_66"/>
        <int16_t name="unk_68"/>
        <int32_t name="unk_6c"/>
        <int16_t name="unk_70"/>
        <int8_t name="unk_72"/>
    </class-type>

    <class-type type-name='site_realization_building_info_market_squarest'
                inherits-from='site_realization_building_infost'>
        <int32_t name="unk_4"/>
    </class-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
